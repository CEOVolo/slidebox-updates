# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–∞–Ω–Ω—ã–º–∏

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –≤ SlideDeck 2.0, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
config/
‚îú‚îÄ‚îÄ migration-config.ts      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ 
scripts/
‚îú‚îÄ‚îÄ universal-data-migration.ts    # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ data-seeding-manager.ts        # –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞—Å–µ–≤–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ [–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞—Å–µ–≤–∞]    # –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü
```

### üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

1. **static_metadata** - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Å—Ç–∞—Ç—É—Å—ã, —Ñ–æ—Ä–º–∞—Ç—ã, —è–∑—ã–∫–∏, —Ä–µ–≥–∏–æ–Ω—ã)
2. **core_metadata** - –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–≥–∏, –¥–æ–º–µ–Ω—ã, –æ–±–ª–∞—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–π)
3. **business_metadata** - –ë–∏–∑–Ω–µ—Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø—Ä–æ–¥—É–∫—Ç—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —Ç–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
4. **content_data** - –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–ª–∞–π–¥—ã)
5. **user_data** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
6. **relationship_data** - –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (many-to-many –æ—Ç–Ω–æ—à–µ–Ω–∏—è)

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
npm run migrate:universal [–æ–ø—Ü–∏–∏]

# –£–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∑–∞—Å–µ–≤ –¥–∞–Ω–Ω—ã—Ö
npm run seed:managed [–æ–ø—Ü–∏–∏]

# –ì–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
npm run data:migrate-dev-to-prod    # –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ dev –≤ prod
npm run data:seed-metadata          # –ó–∞—Å–µ–≤ —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
npm run data:seed-prod              # –ó–∞—Å–µ–≤ –≤ production
npm run data:full-sync              # –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```

### –û–ø—Ü–∏–∏ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
npm run migrate:universal -- --categories static_metadata,core_metadata

# –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
npm run migrate:universal -- --tables category,tag,product

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
npm run migrate:universal -- --dry-run

# –û—á–∏—Å—Ç–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –ë–î –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
npm run migrate:universal -- --clear

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
npm run migrate:universal -- --batch-size 50
```

### –û–ø—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ –∑–∞—Å–µ–≤–∞

```bash
# –ó–∞—Å–µ—è—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
npm run seed:managed -- --categories static_metadata,core_metadata

# –ó–∞—Å–µ—è—Ç—å –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ä–µ–¥—É
npm run seed:managed -- --env prod

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞—Å–µ–≤
npm run seed:managed -- --parallel --max-concurrency 3

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏
npm run seed:managed -- --skip-existing

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
npm run seed:managed -- --force
```

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ —Å–∏—Å—Ç–µ–º—É:

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ `config/migration-config.ts`:

```typescript
{
  tableName: 'newTable',
  displayName: '–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞',
  icon: 'üìù',
  dependencies: ['dependency1'], // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  specialHandling: 'batch',      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  batchSize: 100,               // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  excludeFields: ['sensitiveField'], // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  transformations: {            // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    email: (email: string) => email.toLowerCase()
  }
}
```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∑–∞—Å–µ–≤–∞** (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω):

```typescript
// scripts/seed-new-table.ts
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export async function seedNewTable() {
  console.log('üå± –ó–∞—Å–µ–≤–∞–µ–º –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É...');
  
  const data = [
    { name: '–ó–∞–ø–∏—Å—å 1' },
    { name: '–ó–∞–ø–∏—Å—å 2' }
  ];

  for (const item of data) {
    await prisma.newTable.upsert({
      where: { name: item.name },
      update: item,
      create: item
    });
  }
  
  console.log(`‚úÖ –ó–∞—Å–µ—è–Ω–æ ${data.length} –∑–∞–ø–∏—Å–µ–π`);
}

if (require.main === module) {
  seedNewTable()
    .catch(console.error)
    .finally(() => prisma.$disconnect());
}
```

3. **–û–±–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∑–∞—Å–µ–≤–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞** –≤ `scripts/data-seeding-manager.ts`:

```typescript
const scriptMap: Record<string, string> = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
  'newTable': 'scripts/seed-new-table.ts'
};
```

### –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:

#### –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ('hierarchical')
–î–ª—è —Ç–∞–±–ª–∏—Ü —Å parent-child –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):
- –°–Ω–∞—á–∞–ª–∞ –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä–Ω–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –ó–∞—Ç–µ–º –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã

#### –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ('batch')
–î–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü:
- –î–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ—Ä—Ü–∏—è–º–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞

#### –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ('custom')
–î–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤:
- –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

```bash
# 1. –î–µ–ø–ª–æ–π –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git push origin main

# 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@your-server

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
cd /path/to/app
git pull origin main

# 4. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
docker-compose -f docker-compose.prod.yml exec app npm run data:migrate-dev-to-prod

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker-compose -f docker-compose.prod.yml exec app npm run verify:metadata
```

### –ó–∞—Å–µ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
# –ü–æ–ª–Ω—ã–π –∑–∞—Å–µ–≤ –≤—Å–µ—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
npm run seed:managed -- --categories static_metadata,core_metadata,business_metadata

# –ó–∞—Å–µ–≤ —Å –ø—Ä–æ–ø—É—Å–∫–æ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
npm run seed:managed -- --skip-existing

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞—Å–µ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
npm run seed:managed -- --parallel --max-concurrency 5
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

```bash
# –ò–∑ dev –≤ prod (—Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
npm run data:migrate-dev-to-prod

# –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
npm run data:full-sync

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
npm run migrate:universal -- --tables category,product,tag --clear
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ú–∏–≥—Ä–∞—Ü–∏—è —Å–ª–∞–π–¥–æ–≤ –±–∞—Ç—á–∞–º–∏
npm run migrate:universal -- --tables slide --batch-size 100

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞—Å–µ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
npm run seed:managed -- --categories content_data --parallel
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º:

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migrate:universal -- --dry-run

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
node -e "console.log(require('./config/migration-config').validateDependencies())"
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:

```
üöÄ –ù–∞—á–∏–Ω–∞–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö...
üìÖ –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: 2024-01-15T10:30:00.000Z

üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:
   üìä –°—Ç–∞—Ç—É—Å—ã (status)
   üìÑ –§–æ—Ä–º–∞—Ç—ã (format)
   üåç –Ø–∑—ã–∫–∏ (language)

üìä –°—Ç–∞—Ç—É—Å—ã...
   ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ: 5/5 –∑–∞–ø–∏—Å–µ–π –∑–∞ 150–º—Å

üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ status              |      5/     5 |   150–º—Å
‚úÖ format              |      8/     8 |   200–º—Å
‚úÖ language            |     12/    12 |   180–º—Å
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìà –ò–¢–û–ì–û: 25/25 –∑–∞–ø–∏—Å–µ–π, 0 –æ—à–∏–±–æ–∫
‚è±Ô∏è  –û–±—â–µ–µ –≤—Ä–µ–º—è: 530–º—Å
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
npm run verify:metadata

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
docker-compose -f docker-compose.prod.yml exec postgres psql -U slidebox -d slidebox -c "SELECT COUNT(*) FROM categories;"
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Development
DATABASE_URL_DEV="postgresql://user:pass@host:port/db_dev"

# Production  
DATABASE_URL_PROD="postgresql://user:pass@host:port/db_prod"

# Staging (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DATABASE_URL_STAGING="postgresql://user:pass@host:port/db_staging"
```

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û–±–Ω–æ–≤–∏—Ç–µ `docker-compose.prod.yml` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:

```yaml
services:
  app:
    environment:
      - DATABASE_URL_DEV=${DATABASE_URL_DEV}
      - DATABASE_URL_PROD=${DATABASE_URL_PROD}
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:

```typescript
{
  tableName: 'user',
  excludeFields: ['password', 'resetToken', 'resetTokenExpiry']
}
```

### –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:

```typescript
{
  tableName: 'user',
  transformations: {
    email: (email: string) => email.toLowerCase(),
    phone: (phone: string) => phone.replace(/\D/g, '')
  }
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞—Ç—á–µ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞—Å–µ–≤ –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –ú–∏–≥—Ä–∞—Ü–∏—è —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏
npm run migrate:universal -- --categories content_data --batch-size 50

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞—Å–µ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–æ–≤
npm run seed:managed -- --parallel --max-concurrency 3
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–∞—Ä—É—à–µ–Ω–∏–µ foreign key constraints**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `upsert` –≤–º–µ—Å—Ç–æ `create`

3. **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è**
   - –†–µ—à–µ–Ω–∏–µ: –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ timeout

4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞—Å–µ–≤–∞**
   - –†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ mapping –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ

### –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ backup'–∞ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
docker-compose -f docker-compose.prod.yml exec postgres pg_dump -U slidebox slidebox > backup_$(date +%Y%m%d_%H%M%S).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup'–∞
docker-compose -f docker-compose.prod.yml exec -T postgres psql -U slidebox -d slidebox < backup_file.sql
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö

```typescript
// –í config/migration-config.ts –¥–æ–±–∞–≤—å—Ç–µ:
{
  categoryName: 'analytics_data',
  description: '–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ',
  order: 7,
  tables: [
    {
      tableName: 'metric',
      displayName: '–ú–µ—Ç—Ä–∏–∫–∏',
      icon: 'üìä',
      batchSize: 1000,
      specialHandling: 'batch'
    }
  ]
}
```

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
npm run migrate:universal -- --categories analytics_data

# –ó–∞—Å–µ—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
npm run seed:managed -- --tables metric,report --env prod
```

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±–∞—Ç—á–µ–≤–∞—è –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ü—Ä–æ—Å—Ç–æ—Ç—É** - –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. 