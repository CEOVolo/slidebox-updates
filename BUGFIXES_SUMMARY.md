# –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–∞–≥–æ–≤ –∏ –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (Foreign Key Constraint)
**–ü—Ä–æ–±–ª–µ–º–∞:** `FavoriteSlide_userId_fkey` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ localStorage –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω `app/api/slides/[id]/favorite/route.ts`:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `userId`
  - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ `email`
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ email, —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ë–î
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –û–±–Ω–æ–≤–ª–µ–Ω `app/page.tsx`:
  - –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç `userEmail`, `userName`, `userRole` –≤–º–µ—Å—Ç–µ —Å `userId` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

### 2. –ì–∞–ª–æ—á–∫–∞ –≤ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–≤—å—é –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–≤—å—é –≥–∞–ª–æ—á–∫–∞ –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å –Ω–∞ —Å—Ç–∞—Ä–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω `app/moderation/page.tsx`:
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `_qualityScale?: number` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DraftSlide` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getCurrentQuality()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ URL
  - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `regeneratePreview()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è `_qualityScale` –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  - –û–±–Ω–æ–≤–ª–µ–Ω–æ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–∞–ª–æ—á–∫–∏ –∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Figma —Ç–æ–∫–µ–Ω–∞ (—É–∂–µ –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —Ä–∞–Ω–µ–µ)
- –í—Å–µ API endpoints –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getFigmaAccessToken()` –∏–∑ `lib/figma-token.ts`
- –¢–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º (30 —Å–µ–∫—É–Ω–¥)
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ UI –∫—ç—à —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –±–∞–≥–æ–≤ (–∏–∑ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Quick Filters —Ä–∞–±–æ—Ç–∞—é—Ç
- Filters –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω NaN)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–ª–∞–π–¥–∞—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ approve

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ:**
   - [ ] –í–æ–π—Ç–∏ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–µ –∞–¥–º–∏–Ω)
   - [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ª–∞–π–¥ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–∫–∏ `Foreign key constraint violated`
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–ª–∞–π–¥ –ø–æ—è–≤–∏–ª—Å—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º
   - [ ] –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–ª—Å—è –≤ –ë–î (–µ—Å–ª–∏ –µ–≥–æ –Ω–µ –±—ã–ª–æ)

2. **–ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–µ–≤—å—é:**
   - [ ] –ó–∞–π—Ç–∏ –≤ `/moderation` –∫–∞–∫ –∞–¥–º–∏–Ω
   - [ ] –û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é "Quality" –¥–ª—è –ª—é–±–æ–≥–æ —Å–ª–∞–π–¥–∞
   - [ ] –í—ã–±—Ä–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Low 0.5x)
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≥–∞–ª–æ—á–∫–∞ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∞—Å—å –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
   - [ ] –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ultra 3x)
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≥–∞–ª–æ—á–∫–∞ —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∞—Å—å
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≥–∞–ª–æ—á–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ

3. **Figma —Ç–æ–∫–µ–Ω:**
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ Settings
   - [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–ª–∞–π–¥—ã
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ –ë–î, –∞ –Ω–µ –∏–∑ .env

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

4. **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã:**
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ–∏—Å–∫–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–π —Å—Ç—Ä–æ–∫–µ
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Quick Filters (favorite:true, recent:Xd, category:X)
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Filters –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–µ NaN)

5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   - [ ] –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–∞–π–¥ –≤ moderation
   - [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - [ ] Approve —Å–ª–∞–π–¥
   - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:
- `app/api/slides/[id]/favorite/route.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ foreign key
- `app/page.tsx` - –ø–µ—Ä–µ–¥–∞—á–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `app/moderation/page.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≥–∞–ª–æ—á–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–≤—å—é

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ: `C:\dev\Cursor Projects\SlideDeck 2.0`
- –í—Å–µ worktree –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ Hetzner: `135.181.148.104:5432`
- DATABASE_URL –≤ `.env` –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ Hetzner

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev server: `npm run dev`
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - –º–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **–ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å worktree** - —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env.local** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `C:\dev\Cursor Projects\SlideDeck 2.0`

