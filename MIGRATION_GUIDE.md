# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å DEV –Ω–∞ PRODUCTION

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–≥–∏, –ø—Ä–æ–¥—É–∫—Ç—ã –∏ —Ç.–¥.) —Å dev –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ production.

## üìã –ß—Ç–æ –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è:
- ‚úÖ Categories (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π)
- ‚úÖ Tags (—Ç–µ–≥–∏)
- ‚úÖ Products (–ø—Ä–æ–¥—É–∫—Ç—ã)
- ‚úÖ User Types (—Ç–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- ‚úÖ Components (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- ‚úÖ Integrations (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- ‚úÖ Solution Areas (–æ–±–ª–∞—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–π)
- ‚úÖ Domains (–¥–æ–º–µ–Ω—ã)
- ‚úÖ Statuses (—Å—Ç–∞—Ç—É—Å—ã)
- ‚úÖ Formats (—Ñ–æ—Ä–º–∞—Ç—ã)
- ‚úÖ Languages (—è–∑—ã–∫–∏)
- ‚úÖ Regions (—Ä–µ–≥–∏–æ–Ω—ã)

‚ùå **–ù–ï –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è:** Slides (—Å–ª–∞–π–¥—ã) –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–µ

## üîß –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –î–æ—Å—Ç—É–ø –∫ –æ–±–µ–∏–º –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö (dev –∏ prod)
2. Node.js 20+
3. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

## üìù –í–∞—Ä–∏–∞–Ω—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞)

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# –í .env.local –∏–ª–∏ .env
DATABASE_URL_DEV="postgresql://slidebox_dev_user:andersen_win@135.181.148.104:5432/slidebox_dev?schema=public"
DATABASE_URL_PROD="postgresql://slidebox_ad:andersen_win@135.181.148.104:5432/slidebox_prod?schema=public"
```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ Prisma Client:**
```bash
npx prisma generate
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**
```bash
npm run migrate:metadata
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```bash
npm run verify:metadata
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ GitHub Actions (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **Actions ‚Üí Migrate Metadata to Production**
3. **Run workflow**
4. **–í –ø–æ–ª–µ confirm –≤–≤–µ–¥–∏—Ç–µ:** `migrate`
5. **–ù–∞–∂–º–∏—Ç–µ Run workflow**

–ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ª–æ–≥–∞—Ö.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Docker

1. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å Docker:**
```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
cd /home/slidedeck/app
git pull origin main

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
docker compose -f docker-compose.migrate.yml run --rm migrate-metadata
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
DATABASE_URL="postgresql://slidebox_ad:andersen_win@135.181.148.104:5432/slidebox_prod?schema=public" npm run verify:metadata
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Prisma Studio:
```bash
DATABASE_URL="postgresql://slidebox_ad:andersen_win@135.181.148.104:5432/slidebox_prod?schema=public" npx prisma studio
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –£–î–ê–õ–Ø–ï–¢ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ production** –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º –Ω–æ–≤—ã—Ö
2. **–°–≤—è–∑–∏ —Å–æ —Å–ª–∞–π–¥–∞–º–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** (–µ—Å–ª–∏ —Å–ª–∞–π–¥—ã —É–∂–µ –µ—Å—Ç—å –≤ production)
3. **ID —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
4. **–ü–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–∞–∂–µ–Ω** –∏–∑-–∑–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π

## üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:

### –û—à–∏–±–∫–∞: "Foreign key constraint failed"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

### –û—à–∏–±–∫–∞: "Unique constraint failed"
- –í–æ–∑–º–æ–∂–Ω–æ, –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ production
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–Ω–æ–≤–æ (–æ–Ω —Å–Ω–∞—á–∞–ª–∞ –æ—á–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ)

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å DATABASE_URL
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–µ–Ω

## üìä –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:

–ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç:
```bash
npm run export:metadata
```

–§–∞–π–ª –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ø–∞–ø–∫–µ `exports/`

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:

–î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
1. –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ DEV
2. –ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã - –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
3. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ PROD

## üí° –°–æ–≤–µ—Ç—ã:

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏**
2. **–î–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π**
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö —Å–Ω–∞—á–∞–ª–∞**
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ë–î 